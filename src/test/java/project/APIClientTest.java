package project;

import org.junit.jupiter.api.Test;
import org.junit.runner.RunWith;
import org.mockito.InjectMocks;
import org.mockito.Mock;
import org.mockito.junit.MockitoJUnitRunner;

import java.text.ParseException;
import java.text.SimpleDateFormat;

import static org.junit.jupiter.api.Assertions.*;
import static org.mockito.Mockito.when;

@RunWith(MockitoJUnitRunner.class)
class APIClientTest {
    @Mock
    UserData mUserData = org.mockito.Mockito.mock(UserData.class);
    @InjectMocks
    APIClient apiClient = new APIClient(mUserData);
    @Test
    void getEventsObject() throws ParseException {
        SimpleDateFormat formatter = new SimpleDateFormat("dd-MM-yyyy");

        when(mUserData.getCurrentDate()).thenReturn(formatter.parse("12-12-2023"));
        when(mUserData.getCurrentCity()).thenReturn("Москва");
        when(mUserData.getCurrentCategories()).thenReturn("Детям");

        assertEquals(apiClient.getEventsObject(), "{\"count\":18,\"next\":null,\"previous\":null,\"results\":[{\"id\":188274,\"dates\":[{\"start\":1592298000,\"end\":1601485200},{\"start\":1623481200,\"end\":1623528000},{\"start\":1623790800,\"end\":1627765200},{\"start\":1638342000,\"end\":1643652000},{\"start\":1643785200,\"end\":1646157600},{\"start\":-62135433000,\"end\":1638219600},{\"start\":-62135433000,\"end\":1661972400},{\"start\":-62135433000,\"end\":1727816400}],\"title\":\"развлечения в Smile Park на ВДНХ\",\"place\":{\"id\":32425},\"description\":\"Аттракционы, квесты, интерактивные музеи, лабиринты, удивительные выставки и фотозоны — 11 впечатляющих локаций не оставят равнодушными гостей самого разного возраста. В Smile Park будет интересно всем, кто любит оригинальные фото и яркие впечатления.\",\"categories\":[\"stock\",\"kids\",\"entertainment\"],\"age_restriction\":0,\"site_url\":\"https://kudago.com/msk/event/entertainment-leto-v-muzeyah-big-creative/\"},{\"id\":51836,\"dates\":[{\"start\":1440399600,\"end\":1440449940},{\"start\":1440486000,\"end\":1440536340},{\"start\":1440572400,\"end\":1440622740},{\"start\":1440658800,\"end\":1440709140},{\"start\":1440745200,\"end\":1440795540},{\"start\":1440831600,\"end\":1440881940},{\"start\":1440918000,\"end\":1440968340},{\"start\":1441004400,\"end\":1441054740},{\"start\":1441090800,\"end\":1441141140},{\"start\":1441177200,\"end\":1441227540},{\"start\":1441263600,\"end\":1441313940},{\"start\":1441350000,\"end\":1441400340},{\"start\":1441436400,\"end\":1441486740},{\"start\":1441522800,\"end\":1441573140},{\"start\":1441609200,\"end\":1441659540},{\"start\":1441695600,\"end\":1441745940},{\"start\":1441782000,\"end\":1441832340},{\"start\":1441868400,\"end\":1441918740},{\"start\":1441954800,\"end\":1442005140},{\"start\":1442041200,\"end\":1442091540},{\"start\":1442127600,\"end\":1442177940},{\"start\":1442214000,\"end\":1442264340},{\"start\":1442300400,\"end\":1442350740},{\"start\":1442386800,\"end\":1442437140},{\"start\":1442473200,\"end\":1442523540},{\"start\":1442559600,\"end\":1442609940},{\"start\":1442646000,\"end\":1442696340},{\"start\":1442732400,\"end\":1442782740},{\"start\":1442818800,\"end\":1442869140},{\"start\":1442905200,\"end\":1442955540},{\"start\":1442991600,\"end\":1443041940},{\"start\":1443078000,\"end\":1443128340},{\"start\":1443164400,\"end\":1443214740},{\"start\":1443250800,\"end\":1443301140},{\"start\":1443337200,\"end\":1443387540},{\"start\":1443423600,\"end\":1443473940},{\"start\":1443510000,\"end\":1443560340},{\"start\":1443596400,\"end\":1443646740},{\"start\":1443682800,\"end\":1443733140},{\"start\":1443769200,\"end\":1443819540},{\"start\":1443855600,\"end\":1443905940},{\"start\":1443942000,\"end\":1443992340},{\"start\":1444028400,\"end\":1444078740},{\"start\":1444114800,\"end\":1444165140},{\"start\":1444201200,\"end\":1444251540},{\"start\":1444287600,\"end\":1444337940},{\"start\":1444374000,\"end\":1444424340},{\"start\":1444460400,\"end\":1444510740},{\"start\":1444546800,\"end\":1444597140},{\"start\":1444633200,\"end\":1444683540},{\"start\":1444719600,\"end\":1444769940},{\"start\":1444806000,\"end\":1444856340},{\"start\":1444892400,\"end\":1444942740},{\"start\":1444978800,\"end\":1445029140},{\"start\":1445065200,\"end\":1445115540},{\"start\":1445151600,\"end\":1445201940},{\"start\":1445238000,\"end\":1445288340},{\"start\":1445324400,\"end\":1445374740},{\"start\":1445410800,\"end\":1445461140},{\"start\":1445497200,\"end\":1445547540},{\"start\":1445583600,\"end\":1445633940},{\"start\":1445670000,\"end\":1445720340},{\"start\":1445756400,\"end\":1445806740},{\"start\":1445842800,\"end\":1445893140},{\"start\":1445929200,\"end\":1445979540},{\"start\":1446015600,\"end\":1446065940},{\"start\":1446102000,\"end\":1446152340},{\"start\":1446188400,\"end\":1446238740},{\"start\":1446274800,\"end\":1446325140},{\"start\":1446361200,\"end\":1446411540},{\"start\":1446447600,\"end\":1446497940},{\"start\":1446534000,\"end\":1446584340},{\"start\":1446620400,\"end\":1446670740},{\"start\":1446706800,\"end\":1446757140},{\"start\":1446793200,\"end\":1446843540},{\"start\":1446879600,\"end\":1446929940},{\"start\":1446966000,\"end\":1447016340},{\"start\":1447052400,\"end\":1447102740},{\"start\":1447138800,\"end\":1447189140},{\"start\":1447225200,\"end\":1447275540},{\"start\":1447311600,\"end\":1447361940},{\"start\":1447398000,\"end\":1447448340},{\"start\":1447484400,\"end\":1447534740},{\"start\":1447570800,\"end\":1447621140},{\"start\":1447657200,\"end\":1447707540},{\"start\":1447743600,\"end\":1447793940},{\"start\":1447830000,\"end\":1447880340},{\"start\":1447916400,\"end\":1447966740},{\"start\":1448002800,\"end\":1448053140},{\"start\":1448089200,\"end\":1448139540},{\"start\":1448175600,\"end\":1448225940},{\"start\":1448262000,\"end\":1448312340},{\"start\":1448348400,\"end\":1448398740},{\"start\":1448434800,\"end\":1448485140},{\"start\":1448521200,\"end\":1448571540},{\"start\":1448607600,\"end\":1448657940},{\"start\":1448694000,\"end\":1448744340},{\"start\":1448780400,\"end\":1448830740},{\"start\":1448866800,\"end\":1448917140},{\"start\":1448953200,\"end\":1449003540},{\"start\":1449039600,\"end\":1449089940},{\"start\":1449126000,\"end\":1449176340},{\"start\":1449212400,\"end\":1449262740},{\"start\":1449298800,\"end\":1449349140},{\"start\":1449385200,\"end\":1449435540},{\"start\":1449385200,\"end\":1449435540},{\"start\":1525122000,\"end\":1527800400},{\"start\":1529053200,\"end\":1531688400},{\"start\":1532077200,\"end\":1534798800},{\"start\":1537606800,\"end\":1540242000},{\"start\":1540544400,\"end\":1543179600},{\"start\":1545901200,\"end\":1548709200},{\"start\":1550480400,\"end\":1552856400},{\"start\":1553158800,\"end\":1555923600},{\"start\":1556701200,\"end\":1559250000},{\"start\":1560589200,\"end\":1563228000},{\"start\":1564650000,\"end\":1567285200},{\"start\":1568451600,\"end\":1571173200},{\"start\":1572555600,\"end\":1575147600},{\"start\":1576357200,\"end\":1579122000},{\"start\":1580504400,\"end\":1583096400},{\"start\":1584349200,\"end\":1587070800},{\"start\":1593594000,\"end\":1596229200},{\"start\":1597482000,\"end\":1600203600},{\"start\":1601542800,\"end\":1604178000},{\"start\":1605258000,\"end\":1607893200},{\"start\":1608364800,\"end\":1611086400},{\"start\":1611820800,\"end\":1614542400},{\"start\":1614934800,\"end\":1617656400},{\"start\":1618045200,\"end\":1620680400},{\"start\":1621069200,\"end\":1623790800},{\"start\":1625130000,\"end\":1627765200},{\"start\":1628758800,\"end\":1631480400},{\"start\":1632128400,\"end\":1634763600},{\"start\":1636707600,\"end\":1639342800},{\"start\":1640250000,\"end\":1642971600},{\"start\":1643274000,\"end\":1645995600},{\"start\":1648112400,\"end\":1650834000},{\"start\":1651741200,\"end\":1654462800},{\"start\":1654851600,\"end\":1657486800},{\"start\":1657789200,\"end\":1660510800},{\"start\":1660813200,\"end\":1663534800},{\"start\":1663923600,\"end\":1666558800},{\"start\":1666861200,\"end\":1669582800},{\"start\":1669971600,\"end\":1675371600},{\"start\":1676192400,\"end\":1678654800},{\"start\":1678957200,\"end\":1681678800},{\"start\":1682067600,\"end\":1684702800},{\"start\":1685005200,\"end\":1687726800},{\"start\":1688115600,\"end\":1690750800},{\"start\":1691053200,\"end\":1693774800},{\"start\":1694163600,\"end\":1696798800},{\"start\":1697101200,\"end\":1699822800},{\"start\":1700211600,\"end\":1702846800}],\"title\":\"квест «Красная кнопка»\",\"place\":{\"id\":16645},\"description\":\"Проникнуть в секретный командный пункт, найти красную кнопку, спасти мир — это не фильм, а квест в реальности, где главные герои – это вы и ваша команда.\",\"categories\":[\"kids\",\"recreation\",\"entertainment\"],\"age_restriction\":\"12+\",\"site_url\":\"https://kudago.com/msk/event/kubikulum-igra-kvest/\"},{\"id\":203456,\"dates\":[{\"start\":1678741200,\"end\":1686862800},{\"start\":1692219600,\"end\":1702846800},{\"start\":-62135433000,\"end\":1692133200}],\"title\":\"создание мягкой игрушки с сердцем в Парке развлечений «Остров Мечты»\",\"place\":{\"id\":35079},\"description\":\"Поверить в чудеса и создать плюшевого друга приглашает «Мастерская кота Филиуса». Это стоит сделать каждому хотя бы один раз: создать мягкую игрушку с сердцем! Раньше для этого ехали в Лондон или Дубай. А сейчас есть место в Москве, куда можно сходить, чтобы сделать такой необычный подарок ребёнку или взрослому, в ТРК «Остров Мечты».\",\"categories\":[\"kids\",\"education\",\"entertainment\"],\"age_restriction\":0,\"site_url\":\"https://kudago.com/msk/event/detyam-sozdaj-igrushku/\"},{\"id\":202997,\"dates\":[{\"start\":1676617200,\"end\":1711911600}],\"title\":\"интерактивная выставка-игра «Путь воды» в Москвариуме\",\"place\":{\"id\":33485},\"description\":\"Москвариум приготовил увлекательное приключение для всей семьи. Мультимедийная выставка с элементами квеста расскажет о воде и о том, какую роль она играет на планете.\",\"categories\":[\"exhibition\",\"kids\"],\"age_restriction\":0,\"site_url\":\"https://kudago.com/msk/event/vyistavka-put-vodyi/\"},{\"id\":195448,\"dates\":[{\"start\":1640246400,\"end\":1661972400},{\"start\":-62135433000,\"end\":1675191600},{\"start\":-62135433000,\"end\":1685559600},{\"start\":-62135433000,\"end\":1685559600},{\"start\":-62135433000,\"end\":1706727600}],\"title\":\"выставка «Сокровища гробницы Тутанхамона»\",\"place\":{\"id\":35207},\"description\":\"Какие тайны хранит знаменитая гробница Тутанхамона? Существует ли Проклятие фараонов? Зачем египтяне наполняли усыпальницы правителей тысячами драгоценных предметов? Примерьте на себя роль археолога и найдите ответы на все вопросы!\",\"categories\":[\"exhibition\",\"kids\"],\"age_restriction\":0,\"site_url\":\"https://kudago.com/msk/event/vyistavka-sokrovischa-grobnitsyi-tutanhamona/\"},{\"id\":201160,\"dates\":[{\"start\":1668668400,\"end\":1689620400},{\"start\":-62135433000,\"end\":1702839600}],\"title\":\"арт-вечеринка ArtSpace\",\"place\":{\"id\":34738},\"description\":\"Арт-вечеринки в студии ArtSpace — это возможность интересно провести время, отдохнуть в приятной компании, да ещё и унести домой собственноручно написанную картину.\",\"categories\":[\"kids\",\"education\",\"holiday\",\"recreation\",\"entertainment\"],\"age_restriction\":\"12+\",\"site_url\":\"https://kudago.com/msk/event/vecherinka-art-vecherinka-artspace/\"},{\"id\":207826,\"dates\":[{\"start\":-62135433000,\"end\":253370754000}],\"title\":\"групповые экскурсии на смотровой площадке  PANORAMA360\",\"place\":{\"id\":31013},\"description\":\"Полюбоваться московскими достопримечательностями с высоты птичьего полёта и узнать много интересных фактов о деловом центре столицы смогут участники увлекательных групповых экскурсий на смотровой площадке PANORAMA360.\",\"categories\":[\"kids\",\"tour\",\"entertainment\"],\"age_restriction\":0,\"site_url\":\"https://kudago.com/msk/event/ekskursiya-gruppovyie-ekskursii-v-panorama360/\"},{\"id\":190908,\"dates\":[{\"start\":1612731600,\"end\":1614114000},{\"start\":-62135433000,\"end\":1685480400},{\"start\":-62135433000,\"end\":1705179600}],\"title\":\"подарочные сертификаты в стрелковый клуб «Лабиринт»\",\"place\":{\"id\":3691},\"description\":\"Порадуйте родных и близких необычным подарком — сертификатом в стрелковый клуб «Лабиринт». На занятиях с опытными тренерами интересно будет и взрослым, и детям!\",\"categories\":[\"kids\",\"recreation\",\"entertainment\"],\"age_restriction\":\"12+\",\"site_url\":\"https://kudago.com/msk/event/recreation-podarochnyie-sertifikatyi/\"},{\"id\":206401,\"dates\":[{\"start\":-62135433000,\"end\":253370754000}],\"title\":\"сценарные игры с участием актёров в клубе Lazertag Zone\",\"place\":{\"id\":14833},\"description\":\"Интересные персонажи, атмосферные декорации и захватывающие сюжеты — сценарные игры в клубе Lazertag Zone стирают границы между фантастикой и реальностью. Не упустите возможность почувствовать себя героем знаменитой компьютерной игры или культового боевика и бросить вызов силам зла в компании верных друзей.\",\"categories\":[\"kids\",\"quest\",\"recreation\",\"entertainment\"],\"age_restriction\":\"12+\",\"site_url\":\"https://kudago.com/msk/event/entertainment-stsenarnyie-igryi-v-lazertag-zone/\"},{\"id\":206400,\"dates\":[{\"start\":-62135433000,\"end\":253370754000}],\"title\":\"детский праздник в клубе Lazertag Zone\",\"place\":{\"id\":14833},\"description\":\"Хотите подарить имениннику и его гостям яркие впечатления? Увлекательные командные игры в клубе Lazertag Zone сделают любой детский праздник событием, которое невозможно забыть.\",\"categories\":[\"kids\"],\"age_restriction\":\"6+\",\"site_url\":\"https://kudago.com/msk/event/detyam-detskij-prazdnik-v-klube-lazertag-zone/\"},{\"id\":184545,\"dates\":[{\"start\":1580504400,\"end\":1585170000},{\"start\":1600257600,\"end\":1600264800},{\"start\":1600326000,\"end\":1600351200},{\"start\":1600585200,\"end\":1600610400},{\"start\":1600671600,\"end\":1606744800},{\"start\":1606806000,\"end\":1610373600},{\"start\":1621198800,\"end\":1635541200},{\"start\":1635750000,\"end\":1640872800},{\"start\":1641106800,\"end\":1648648800},{\"start\":1667890800,\"end\":1682863200},{\"start\":1683702000,\"end\":1683900000},{\"start\":1684479600,\"end\":1684677600},{\"start\":1684738800,\"end\":1685023200},{\"start\":1685257200,\"end\":1698760800},{\"start\":1699167600,\"end\":1699279200},{\"start\":1699426800,\"end\":1703944800},{\"start\":1704265200,\"end\":1714485600}],\"title\":\"экскурсия-квест для детей «Тайны Красной площади»\",\"place\":null,\"description\":\"Что любят дети больше всего? Игры, загадки, тайны и, конечно, призы. Всё это есть в экскурсии-квесте по Московскому Кремлю, во время которой участники будут решать исторические задачи и находить ответы на непростые вопросы.\",\"categories\":[\"kids\",\"tour\",\"entertainment\"],\"age_restriction\":\"6+\",\"site_url\":\"https://kudago.com/msk/event/ekskursiya-tajnyi-krasnoj-ploschadi/\"},{\"id\":205113,\"dates\":[{\"start\":1685865600,\"end\":1685883600},{\"start\":1686034800,\"end\":1686142800},{\"start\":1686258000,\"end\":1687467600},{\"start\":1687726800,\"end\":1689282000},{\"start\":1694206800,\"end\":1698786000},{\"start\":1698912900,\"end\":1698923700},{\"start\":1699131600,\"end\":1699563600},{\"start\":1699650000,\"end\":1703883600},{\"start\":1704142800,\"end\":1714510800}],\"title\":\"экскурсия «Узнаём Москву, играя: вокруг Кремля»\",\"place\":null,\"description\":\"Стены Кремля, Александровский сад, Красная площадь — экскурсанты поближе познакомятся с ключевыми достопримечательностями города, а увлекательный игровой формат экскурсии поможет лучше усвоить новые знания.\",\"categories\":[\"kids\",\"tour\"],\"age_restriction\":\"6+\",\"site_url\":\"https://kudago.com/msk/event/ekskursiya-uznayom-moskvu-igraya-vokrug-kremlya/\"},{\"id\":48542,\"dates\":[{\"start\":-62135433000,\"end\":253370754000}],\"title\":\"интерактивный образовательный центр в Дарвиновском музее «Познай себя – познай мир»\",\"place\":{\"id\":96},\"description\":\"Открытие «нового старого мира» с помощью современных технологий. Удивительное рядом — позвольте себе еще раз в этом убедиться.\",\"categories\":[\"exhibition\",\"kids\"],\"age_restriction\":null,\"site_url\":\"https://kudago.com/msk/event/interaktivnyj-obrazovatelnyj-centr-v-darvinovskom-/\"},{\"id\":16860,\"dates\":[{\"start\":-62135433000,\"end\":253370754000}],\"title\":\"постоянная экспозиция Дарвиновского музея «Многообразие жизни на Земле»\",\"place\":{\"id\":96},\"description\":\"Экспозиция знакомит  с огромным разнообразием живых существ, соседствующих с человеком на Земле. Посетителям предстоит забраться на вершины гор и погрузиться на океанское дно, чтобы убедиться в изобретательности матери-природы.\",\"categories\":[\"exhibition\",\"kids\"],\"age_restriction\":0,\"site_url\":\"https://kudago.com/msk/event/mnogoobrazie-zhizni-regular-msk/\"},{\"id\":21334,\"dates\":[{\"start\":-62135433000,\"end\":253370754000}],\"title\":\"интерактивная экспозиция Дарвиновского музея «Пройди путем эволюции»\",\"place\":{\"id\":96},\"description\":\"Возможность совершить увлекательное путешествие по пути эволюции живых организмов с помощью новейших мультимедийных технологий.\",\"categories\":[\"exhibition\",\"kids\"],\"age_restriction\":0,\"site_url\":\"https://kudago.com/msk/event/interaktivnaya-ekspoziciya-projdi-putem-evolyucii/\"},{\"id\":17010,\"dates\":[{\"start\":-62135433000,\"end\":253370754000}],\"title\":\"постоянная экспозиция Дарвиновского музея «Происхождение человека»\",\"place\":{\"id\":96},\"description\":\"Когда и как мы появились на земле? Эти вопросы волновали и великие умы человечества и рядовых обывателей. Теперь же ученые считают его решенным. Результаты их многолетней работы представлены в рамках экспозиции музея.\",\"categories\":[\"exhibition\",\"kids\"],\"age_restriction\":0,\"site_url\":\"https://kudago.com/msk/event/proishozhdenie-cheloveka-msk/\"},{\"id\":169613,\"dates\":[{\"start\":1522443600,\"end\":1561928400},{\"start\":-62135433000,\"end\":1577826000},{\"start\":-62135433000,\"end\":253370754000}],\"title\":\"постоянная экспозиция Хлебного дома «Зачем ребёнку медведь?»\",\"place\":{\"id\":531},\"description\":\"В экспозицию входят 110 глиняных народных игрушек, изображающих реальных и фантастических животных.\",\"categories\":[\"exhibition\",\"kids\"],\"age_restriction\":0,\"site_url\":\"https://kudago.com/msk/event/vyistavka-zachem-rebyonku-medved/\"},{\"id\":16898,\"dates\":[{\"start\":-62135433000,\"end\":253370754000}],\"title\":\"постоянная экспозиция Дарвиновского музея «Микроэволюция»\",\"place\":{\"id\":96},\"description\":\"Как из одного вида могут образовываться совершенно новые.\",\"categories\":[\"exhibition\",\"kids\"],\"age_restriction\":0,\"site_url\":\"https://kudago.com/msk/event/mikroevolyuciya-regular-msk/\"}]}");
    }
}